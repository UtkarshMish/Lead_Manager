(window.webpackJsonpleadmanager=window.webpackJsonpleadmanager||[]).push([[0],{39:function(e,t,a){e.exports=a(88)},44:function(e,t,a){},47:function(e,t,a){},72:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),o=a.n(c),s=(a(44),a(45),a(4)),i=a(5),m=a(7),u=a(6),d=a(8),h=a(19),p=a(1),f=a.n(p),b=a(9),E=(a(47),a(16)),v=a(18),g=a.n(v),y=a(35),O=a.n(y),w=function(){return g.a.get("/api/leaddetails")},N=function(){var e=Object(b.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(t),e.next=3,w();case 3:return a=e.sent,e.abrupt("return",a.data.find(function(e){return e.id===t}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(b.a)(f.a.mark(function e(t,a){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/api/auth",{username:t,password:a});case 3:if(!0!==(n=e.sent).data.auth){e.next=9;break}return localStorage.setItem("token",n.data.token),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,a){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(f.a.mark(function e(t){var a,n,r,l,c,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=t.email,r=t.address,l=t.mobile,c=t.area,e.prev=1,o=Date().toString(),e.next=5,g.a.post("/api/newlead",{name:a,mobile:l,email:n,address:r,area:c,enquiry_date:o});case 5:if(!0!==e.sent.data.success){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}();function C(){var e=localStorage.getItem("token");return e?O()(e):null}function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}n=localStorage.getItem("token"),g.a.defaults.headers.common["x-auth-token"]=n;var D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userInput:{username:"",password:""},auth:!1,error:null},a.handleSubmit=function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r,l,c;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.userInput,r=n.username,l=n.password,c=!1,e.next=7,j(r,l);case 7:!0===(c=e.sent)?a.setState({auth:c}):("Username or Password didn't match !",a.setState({error:"Username or Password didn't match !"}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.currentTarget,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.state.userInput);n[t.name]=t.value,a.setState({userInput:n})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.userInput,a=e.error;return!0===e.auth||C()?l.a.createElement(E.a,{to:"/home/leads"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card-container"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"username"},"User Name:",l.a.createElement("input",{onChange:this.handleChange,value:t.username,type:"text",name:"username",required:!0}))),l.a.createElement("div",{className:"row"},l.a.createElement("label",{htmlFor:"password"},"Password:",l.a.createElement("input",{onChange:this.handleChange,value:t.password,type:"password",name:"password",required:!0})),a&&l.a.createElement("div",{className:"alert-danger"},l.a.createElement("h5",null,a))),l.a.createElement("button",{type:"submit",className:"login-button"},"Login"))))}}]),t}(r.Component),x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={leadData:{},loaded:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,N(t);case 3:(a=e.sent)?this.setState({leadData:a,loaded:!0}):this.setState({leadData:{not_found:!0}});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.leadData,a=e.loaded;return t.not_found?l.a.createElement(E.a,{to:"/home/leads"}):!0!==a?null:l.a.createElement("div",{className:"page-wrap"},l.a.createElement("h1",{className:"main-heading"},"Lead Information"),l.a.createElement("div",{className:"form__details"},l.a.createElement("form",{className:"form-group"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"name"},"Name: "),l.a.createElement("input",{required:!0,type:"text",value:t.name,disabled:!0,name:"name"})),l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"address"},"Address: "),l.a.createElement("textarea",{required:!0,type:"text",disabled:!0,value:t.address,name:"address"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"mobile"},"Mobile: "),l.a.createElement("input",{required:!0,type:"number",disabled:!0,value:t.mobile,name:"mobile"})),l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"area"},"Area: "),l.a.createElement("input",{required:!0,type:"text",disabled:!0,value:t.area,name:"area"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"email"},"Email: "),l.a.createElement("input",{required:!0,type:"email",disabled:!0,value:t.email,name:"email"}))))))}}]),t}(r.Component),P=(a(72),a(3)),q=a(38),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={menuOpen:!1},a.handleStateChange=function(e){a.setState({menuOpen:e.isOpen})},a.closeMenu=function(){a.setState({menuOpen:!1})},a.toggleMenu=function(){a.setState(function(e){return{menuOpen:!e.menuOpen}})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar"},l.a.createElement("div",{className:"menu"},l.a.createElement(q.pushRotate,{width:"15rem",isOpen:this.state.menuOpen,onStateChange:function(t){return e.handleStateChange(t)},pageWrapId:"page-wrap",outerContainerId:"outer-container",noOverlay:!0,disableOverlayClick:!0,customBurgerIcon:!1},l.a.createElement("h4",{className:"heading-logo"},"DrinkPrime"),l.a.createElement("div",{className:"menu-items"},l.a.createElement("div",{className:"menu-main-item"},"$ Sales",l.a.createElement("i",{className:"fa fa-angle-down menu-main-item ","aria-hidden":"true"})),l.a.createElement(P.b,{onClick:this.closeMenu,id:"home",className:"menu-item",to:"/home/leads"},l.a.createElement("i",{className:"fa fa-dot-circle-o icon-big-white","aria-hidden":"true"}),"New Lead"),l.a.createElement(P.b,{onClick:this.closeMenu,className:"menu-item",to:"/home/newlead"},l.a.createElement("i",{className:"fa fa-dot-circle-o icon-big-white","aria-hidden":"true"}),"Create new lead"))),l.a.createElement("button",{onClick:this.toggleMenu,className:"btn-menu"},l.a.createElement("i",{className:"fa fa-bars icon-big-white","aria-hidden":"true"}))),l.a.createElement(P.b,{to:"/",className:"menu-logout",onClick:function(e){localStorage.removeItem("token")}},"Log Out")))}}]),t}(r.Component),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={leadDetails:[],isLoading:!0,sortBy:"id",type:!1},a.handleSort=function(e,t){var n=a.state,r=n.leadDetails,l=n.sortBy;l=e,r=!0===t?"id"!==e?r.sort(function(t,a){return t[e].toLowerCase()>a[e].toLowerCase()?1:-1}):r.sort(function(t,a){return t[e]>a[e]?1:-1}):"id"!==e?r.sort(function(t,a){return t[e].toLowerCase()<a[e].toLowerCase()?1:-1}):r.sort(function(t,a){return t[e]<a[e]?1:-1}),a.setState({leadDetails:r,type:!t,sortBy:l})},a.changeValue=function(e){a.setState({DetailedValue:e})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.props.leadDetails)&&this.setState({leadDetails:t,isLoading:!1});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.leadDetails,n=t.isLoading,r=t.type;if(!0===n)return null;var c=Math.floor(a.length/6);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lead__details "},l.a.createElement("h2",null,"New Leads"),l.a.createElement("h4",null,"Show",l.a.createElement("span",null,l.a.createElement("select",{selected:"selected",className:"page-selector"},l.a.createElement("option",null,6*c))),"entries"),l.a.createElement("table",{className:"table",border:"border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"sort-icon",onClick:function(){return e.handleSort("id",r)}},"Lead ID","id"===this.state.sortBy?l.a.createElement("i",{className:" fa fa-sort-"+(!0===r?"desc":"asc"),"aria-hidden":"true"}):""),l.a.createElement("th",{className:"sort-icon",onClick:function(){return e.handleSort("name",r)}},"Name","name"===this.state.sortBy?l.a.createElement("i",{className:" fa fa-sort-"+(!0===r?"desc":"asc"),"aria-hidden":"true"}):""),l.a.createElement("th",{className:"sort-icon",onClick:function(){return e.handleSort("enquiry_date",r)}},"EnquiryDate","enquiry_date"===this.state.sortBy?l.a.createElement("i",{className:" fa fa-sort-"+(!0===r?"desc":"asc"),"aria-hidden":"true"}):""),l.a.createElement("th",null,"Mobile"))),l.a.createElement("tbody",null,a.map(function(t){return l.a.createElement("tr",{key:t._id,onClick:function(){return e.changeValue(t.id)}},l.a.createElement("td",{className:"btn-details"},l.a.createElement(P.b,{className:"btn-details-Link",to:"/home/leads/".concat(t.id)},t.id)),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.enquiry_date),l.a.createElement("td",null,t.mobile))})))))}}]),t}(r.Component);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={leadData:{name:"",mobile:"",email:"",address:"",area:""},submitted:!1},a.handleSubmit=function(){var e=Object(b.a)(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.leadData,r=!1,e.next=5,k(n);case 5:r=e.sent,console.log(r),!0===r&&a.setState({submitted:r});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.currentTarget,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach(function(t){Object(h.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.state.leadData);n[t.name]=t.value,a.setState({leadData:n})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.leadData;return!0===e.submitted?l.a.createElement(E.a,{to:"/"}):l.a.createElement("div",{className:"page-wrap"},l.a.createElement("h1",{className:"main-heading"},"Lead Information"),l.a.createElement("div",{className:"form__details"},l.a.createElement("form",{className:"form-group",onSubmit:this.handleSubmit},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"name"},"Name: "),l.a.createElement("input",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,name:"name",placeholder:"Enter Name:"})),l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"address"},"Address: "),l.a.createElement("textarea",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,value:t.address,name:"address",placeholder:"Enter Address:"})),l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("button",{type:"submit",className:"btn-submit"},"Create Lead"))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"mobile"},"Mobile: "),l.a.createElement("input",{min:"0000000001",max:"9999999999",required:!0,type:"number",className:"form-control",onChange:this.handleChange,value:t.mobile,name:"mobile",placeholder:"Enter Mobile:"})),l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"area"},"Area: "),l.a.createElement("input",{required:!0,type:"text",className:"form-control",onChange:this.handleChange,value:t.area,name:"area",placeholder:"Enter Area:"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-1-of-3"},l.a.createElement("label",{htmlFor:"email"},"Email: "),l.a.createElement("input",{required:!0,type:"email",className:"form-control",onChange:this.handleChange,value:t.email,name:"email",placeholder:"Enter Email:"}))))))}}]),t}(r.Component),_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={leadDetails:[]},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,this.setState({leadDetails:t.data});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return C()?l.a.createElement(E.d,null,l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"outer-container"},l.a.createElement("div",{className:"header-container"},l.a.createElement(F,null)),l.a.createElement("div",{id:"page-wrap"},l.a.createElement(E.b,{exact:!0,path:"/home/newlead",component:M}),l.a.createElement(E.b,{exact:!0,path:"/home/leads/:id",component:x}),l.a.createElement(E.b,{exact:!0,path:"/home/leads/",component:function(t){return l.a.createElement(I,{leadDetails:e.state.leadDetails})}}))))):l.a.createElement(E.a,{to:"/"})}}]),t}(r.Component),A=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){try{var e=C();this.setState({user:e})}catch(t){}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.d,null,l.a.createElement(E.b,{path:"/",component:D,className:"item",exact:!0}),l.a.createElement(E.b,{path:"/home",component:_,className:"item"}),l.a.createElement(E.a,{from:"/home",to:"/home/leads",exact:!0}),";"))}}]),t}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(P.a,null,l.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.e3d4919c.chunk.js.map